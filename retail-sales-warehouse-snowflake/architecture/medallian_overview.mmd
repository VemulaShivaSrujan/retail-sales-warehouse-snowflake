---
config:
  theme: base
  look: rounded
  layout: dagre
---
flowchart LR
 subgraph Sources_Card[" "]
    direction TB
        S_Icon["üì°"]
        SRC_CRM["üìÅ<br><b>Landing Zone</b><br><small>S3 / ADLS (CSV/JSON)</small>"]
        SRC_ERP["üóÑÔ∏è<br><b>Operational DB</b><br><small>Postgres / CDC</small>"]
  end
 subgraph Sources["üì• INGESTION SOURCES"]
    direction TB
        Sources_Card
  end
 subgraph Bronze_Card[" "]
    direction TB
        B_SP@{ label: "<div style=\"color:Ô¨Ç¬∞fff¬∂√ü background:Ô¨Ç¬∞2E86C1¬∂√ü border-radius:4px; padding:4px\">&lt;/&gt;</div><small>Ingestion Job</small>" }
        B_DB[("üì¶<br>Persistent Storage")]
        B_Meta@{ label: "<div style=\"text-align:left;font-size:10px\">‚Ä¢ Append-Only<br>‚Ä¢ Schema-on-Read<br>‚Ä¢ Historical Replay</div>" }
  end
 subgraph Bronze["<b>Bronze (Raw)</b>"]
    direction TB
        Bronze_Card
  end
 subgraph Silver_Card[" "]
    direction TB
        S_SP@{ label: "<div style=\"color:Ô¨Ç¬∞fff¬∂√ü background:Ô¨Ç¬∞2E86C1¬∂√ü border-radius:4px; padding:4px\">&lt;/&gt;</div><small>Refining Logic</small>" }
        S_DB[("üßπ<br>Cleansed Data")]
        S_Meta@{ label: "<div style=\"text-align:left;font-size:10px\">‚Ä¢ De-duplicated<br>‚Ä¢ Unified Schema<br>‚Ä¢ Delta/Parquet</div>" }
  end
 subgraph Silver["<b>Silver (Enriched)</b>"]
    direction TB
        Silver_Card
  end
 subgraph Gold_Card[" "]
    direction TB
        G_Icon["üíé"]
        G_DB[("üèÜ<br>Aggregated Hub")]
        G_Meta@{ label: "<div style=\"text-align:left;font-size:10px\">‚Ä¢ Dim/Fact Models<br>‚Ä¢ Sub-second Query<br>‚Ä¢ Semantic Layer</div>" }
  end
 subgraph Gold["<b>Gold (Curated)</b>"]
    direction TB
        Gold_Card
  end
 subgraph DWH["<b>MODERN DATA LAKEHOUSE PLATFORM</b>"]
    direction LR
        Bronze
        Gate1{"‚ö†Ô∏è<br><small>Validation</small>"}
        Silver
        Gate2{"‚úÖ<br><small>KPI Check</small>"}
        Gold
  end
 subgraph Consume_Card[" "]
    direction TB
        C1["üìä <b>Executive BI</b><br><small>Tableau / PowerBI</small>"]
        C2["üî¨ <b>Data Science</b><br><small>Jupyter / MLFlow</small>"]
        C3["üîÑ <b>Reverse ETL</b><br><small>Sync to CRM</small>"]
  end
 subgraph Consume["üöÄ CONSUMPTION"]
    direction TB
        Consume_Card
  end
    S_Icon --> SRC_CRM
    SRC_CRM --> SRC_ERP
    B_SP --> B_DB
    B_DB --> B_Meta
    S_SP --> S_DB
    S_DB --> S_Meta
    G_Icon --> G_DB
    G_DB --> G_Meta
    Bronze ==> Gate1
    Gate1 ==> Silver
    Silver ==> Gate2
    Gate2 ==> Gold
    C1 --- C2
    C2 --- C3
    Sources ==> Bronze
    Gold ==> Consume

    B_SP@{ shape: rect}
    B_Meta@{ shape: rect}
    S_SP@{ shape: rect}
    S_Meta@{ shape: rect}
    G_Meta@{ shape: rect}
     SRC_CRM:::Aqua
     SRC_ERP:::Aqua
     B_DB:::Ash
     S_DB:::Peach
     G_DB:::Rose
     Gate1:::Sky
     Gate2:::Sky
     C1:::Sky
     C2:::Sky
     C3:::Sky
    classDef Aqua stroke-width:1px, stroke-dasharray:none, stroke:#46EDC8, fill:#DEFFF8, color:#378E7A
    classDef Ash stroke-width:1px, stroke-dasharray:none, stroke:#999999, fill:#EEEEEE, color:#000000
    classDef Peach stroke-width:1px, stroke-dasharray:none, stroke:#FBB35A, fill:#FFEFDB, color:#8F632D
    classDef Rose stroke-width:1px, stroke-dasharray:none, stroke:#FF5978, fill:#FFDFE5, color:#8E2236
    classDef Sky stroke-width:1px, stroke-dasharray:none, stroke:#374D7C, fill:#E2EBFF, color:#374D7C
    style S_Icon fill:none,stroke:none
    style Sources_Card fill:#ffffff,stroke:#3498db,stroke-width:2px
    style B_SP fill:none,stroke:none
    style B_Meta fill:none,stroke:none
    style Bronze_Card fill:#ffffff,stroke:#cd7f32,stroke-width:2px
    style S_SP fill:none,stroke:none
    style S_Meta fill:none,stroke:none
    style Silver_Card fill:#ffffff,stroke:#95a5a6,stroke-width:2px
    style G_Icon fill:none,stroke:none
    style G_Meta fill:none,stroke:none
    style Gold_Card fill:#ffffff,stroke:#f1c40f,stroke-width:3px
    style Gate1 fill:#fff5f5,stroke:#e74c3c
    style Gate2 fill:#f0fff4,stroke:#27ae60
    style Consume_Card fill:#ffffff,stroke:#8e44ad,stroke-width:2px
    style Sources fill:none,stroke:none
    style Consume fill:none,stroke:none
    style DWH fill:#f8f9fa,stroke:#2c3e50,stroke-width:3px,stroke-dasharray: 10 5